<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">


<style>
    body{
        margin: 0;
        font-family: 'Inter';
        display: flex;
    }
    .side_bar{
        height: 100dvh;
        background-color: darkgreen;
        display: flex;
        flex-direction: column;
        color: white;
        width: fit-content;
        font-weight: bold;
        justify-content: space-evenly;
        font-size: 16px;
        overflow: auto;
        scrollbar-width: none;  
        z-index: 1;
    }
    .side_bar label{
        padding: 10px 20px;
        cursor: pointer;
    }
    .info{
        display: flex;
        flex-direction: column;
        flex: 1;
        height: 100dvh;
        overflow: auto;
        scrollbar-width: none;
    }
    .top_bar{
        background: linear-gradient(to right,darkgreen,lime);
        color: white;
        padding: 10px 20px;
        font-size: 20px;
        font-weight: bold;
        display: flex;
        align-items: center;
        border-left: solid 1px;
        position: fixed;
        top: 0;
        width: 100%;
    }
    .info span{
        color: white;
        font-size: 20px;
        font-weight: bold;
        margin: 10px;
        background: linear-gradient(to right, darkgreen, lime);
        padding: 5px;
    }
    .info nav{
        margin: 10px;
        font-weight: bold;
    }
    .info img{
        width: 200px;
        border-radius: 50%;
    }
    .info nav li{
        font-weight: normal;
    }
    ul{
        margin: 0;
        list-style: auto;
        margin-right: 10px;
    }
    .top_bar button{
        margin-left: 10px;
        background-color: white;
        color: darkgreen;
        border: none;
        border-radius: 5px;
    }
    button{
        cursor: pointer;
    }
    .feedback{
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 20px;
        margin-bottom: 20px;
    }
    .feedback input{
        padding: 5px;
        border-radius: 10px;
        font-size: 16px;
        width: 250px;
        font-family: 'Inter';
        border: 1px solid darkgreen;

    }
    .feedback textarea{
        padding: 5px;
        border-radius: 10px;
        font-size: 16px;
        width: 400px;
        height: 100px;
        font-family: 'Inter';
        resize: none;
        scrollbar-width: none;
        border: 1px solid darkgreen;
    }
    .feedback button{
        padding: 5px;
        border-radius: 10px;
        font-size: 16px;
        font-family: 'Inter';
        border: none;
        color: white;
        background: linear-gradient(to right, darkgreen, lime);
        width: 262px;
    }
    @media (max-width:600px)
    {
        .feedback textarea{
            width: 250px;
        }
        .top_bar{
            border: none;
            justify-content: space-between;
            padding: 10px 0px;
        }
        .top_bar label{
            padding-right: 10px;
        }
        

    }
</style>
<body>
    <div class="side_bar">
        <label style="font-size: 32px;">WhatsUpp</label>
        <label style="color: darkgreen;background-color: lightgreen;">Application Link</label>
        <label>Tech Stack</label>
        <label>App Components</label>
        <label>SQL-NOSQL Combination</label>
        <label >Unique Features</label>
        <label >Navigation Notables</label>
        <label >Account Status</label>
        <label>Database Security</label>
        <label>Provide Feedback</label>
    </div>
    <div class="info">
        <div class="top_bar" id="app_title">
            <button id="menu" style="display: none;"><i id="menu_icon" class="fa-solid fa-bars"></i></button>
            <label>Online Chatting App - WhatsUpp</label>
        </div>
        <span style="margin-top: 64px;" id="app_link">Application Link</span>
        <a style="text-align: center;" href="https://whatsupp-chat.vercel.app">https://whatsupp-chat.vercel.app</a>
        <span id="tech_stack">Tech Stack</span>
        <div style="display: flex;flex-wrap: wrap;gap: 20px;align-items: center;justify-content: center;">
            <img src="react.png"> 
            <img src="express.png"> 
            <img src="postgres.png"> 
            <img src="firebase.png"> 
        </div>
        <span id="app_components">App Components</span>
        <nav>Login Page
            <ul>
                <li>LogIn and SignUp features.</li>
                <li> Account Password Recovery.</li>
            </ul>
        </nav>
        <nav style="margin-top: 10px;">Profile Page
            <ul>
                <li>You can add your personal info.</li>
                <li>Keep username and profile name different for security purposes.</li>
            </ul>
        </nav>
        <nav style="margin-top: 10px;">Chat Section
            <ul>
                <li>Chats are <b>not encrypted</b> for now.</li>
                <li>Chats are <b>sorted</b> from latest to oldest ones.</li>
                <li>Message is delivered to other person  <b>if it is marked with ✔✔</b>.</li>
                <li><b>Blue Tick</b> and <b>SeenAt</b> features are implemented to tell you that receiver has read the message along with the time when it was read.</li>
                <li>You <b>get notified</b> on application when you receive unread messages.</li>
                <li>You can <b>Edit,Delete and Reply</b> to messages.</li>
                <li><b>Date and Time</b> show when did the conversations happended.</li>
                <li>Edited messages would appear with <b>Edited</b> label.</li>
            </ul>
        </nav>
        <nav style="margin-top: 10px;">Settings Section
            <ul>
                <li>You can change account password and background theme.</li>
            </ul>
        </nav>
        <nav style="margin-top: 10px;">Profile Section
            <ul>
                <li>To update your personal info and account username.</li>
            </ul>
        </nav>
        <nav style="margin-top: 10px;">Add Account
            <ul>
                <li>You can sign up/log in to multiple accounts.</li>
            </ul>
        </nav>
        <nav style="margin-top: 10px;">People Section
            <ul>
                <li>Shows list of people who have joined this platform,you can search and start chatting with them.</li>
            </ul>
        </nav>
        <span id="chat_detail">SQL-NOSQL Combination</span>
        <label style="margin: 10px;">Postgresql and Firebase are combined to produce this application.
            LogIn and profile information is stored in postgresql but messages/chats are stored in both.
            Messages in postgresql show who is sender/receiver,when was message delivered and 
            message text while messages in firebase (cloud firestore) along side these attributes 
            tell whether a message has been seen/edited/qouted.When home page loads,chats are 
            read from postgresql,scanned by firebase (cloud firestore) and then you see unread received 
            messages,blue tick on messages which are being read by receiving person and other pieces of information.</label>
        <span id="unique_features">Unique Features</span>
        <nav style="font-weight: normal;">There are <b>three such features that are not implemented in actual Whatsapp</b> but you are able to see here.
            <ul>
                <li>When you delete a message from a conversation ,it is deleted from receiver's side as well without notifying that person like <i>This message was deleted.</i></li>
                <li>Now consider a message is sent while replying or qouting a certain message.If that qouted message is edited or deleted,then that change is reflected where it is qouted or replied to.</li>
            </ul>
        </nav>
        <span id="nav_detail" >Navigation Notables</span>
        <ul>
            <li>You must fill and submit information while signing up on login and profile pages before going to home page otherwise you will be redirected back</li>
            <li>Once you have signed up on this application, you dont have to login again and you will be redirected to home page.</li>
            <li>Use icons on home page to navigate between its different sections and not back button.</li>
        </ul>
        <span id="account_status">Account Status</span>
        <ul>
            <li>You can view whether other person is online,typing a message to you and person's last active time.</li>
            <li>If someone gets access to your account,change both username & password particularly username(because old username 
                stored in that someone's browser would result in logging out from your account).</li>

        </ul>
        <span id="database_security">Database Security</span>
        <ul>
            <li>Database connection strings/keys for both firebase and postgresql are provided in environment variables and are hidden from this repository to prevent read/write from other sites.</li>
            <li>Even if someone gets firebase connection strings/keys from browser's Network tab,its still not possible to read/write data into firebase because of domain restriction and this firebase
                project/database only accepts apis from this application's url.
            </li>
        </ul>
        <span id="provide_feedback">Provide Feedback</span>
        <div class="feedback">
            <input id="name" placeholder="Your Name">
            <input id="email" placeholder="Your Email">
            <textarea id="feedback_message" placeholder="Write Feedback..."></textarea>
            <button>Submit</button>
        </div>
    </div>
    <script>
        let name=document.getElementById('name')
        let email=document.getElementById('email')
        let feedback_message=document.getElementById('feedback_message')
        name.addEventListener('input',(e)=>
        {
            e.target.value=e.target.value.replace(/[^a-zA-Z_]/g,'')
        })
        email.addEventListener('input',(e)=>
        {
            e.target.value=e.target.value.replace(/[^a-zA-Z_@.0-9]/g,'')
        })
        feedback_message.addEventListener('input',(e)=>
        {
            if(e.target.value.startsWith(' ')){
                e.target.value=e.target.value.slice(1)
            }
        })
        let side_icons=document.querySelectorAll('.side_bar label')
        for(let i=0;i<side_icons.length;i++)
        {
            side_icons[i].addEventListener('click',()=>
            {
                if(i!==0)
                {
                    for(let j=0;j<side_icons.length;j++)
                    {
                        if(getComputedStyle(side_icons[j]).color==='rgb(0, 100, 0)')
                        {
                            side_icons[i].style.background='linear-gradient(to right, darkgreen, lime)'
                            side_icons[i].style.border='none'
                            break
                        }
                    }
                    side_icons[i].style.backgroundColor='darkgreen'
                    side_icons[i].style.borderWidth='1px 0px'
                    side_icons[i].style.border='white solid'



                }
                document.getElementById(`${['app_title','app_link','tech_stack','app_components','chat_detail','unique_features','nav_detail','account_status','database_security','provide_feedback'][i]}`).scrollIntoView({behavior:'smooth',block:'center'})
                if(window.innerWidth<601)
                {
                    document.getElementsByClassName('side_bar')[0].style.width='0'
                    document.getElementsByClassName('side_bar')[0].style.position='static'
        
                }
                document.getElementsByClassName('side_bar')[0].style.overflow='auto'
                document.getElementsByClassName('info')[0].style.overflow='auto'

            })
        }
        document.querySelectorAll('.top_bar label')[0].innerHTML=window.innerWidth>600?'Online Chatting App - WhatsUpp': 'WhatsUpp-ChatApp'
        document.querySelectorAll('.top_bar button')[0].style.display=window.innerWidth>600?'none': 'block'
        document.getElementsByClassName('side_bar')[0].style.width=window.innerWidth>600?'238.54px':'0'


        window.addEventListener('resize',()=>
        {

            document.querySelectorAll('.top_bar label')[0].innerHTML=window.innerWidth>600?'Online Chatting App - WhatsUpp': 'WhatsUpp-ChatApp'
            document.querySelectorAll('.top_bar button')[0].style.display=window.innerWidth>600?'none': 'block'
            document.getElementsByClassName('side_bar')[0].style.width=window.innerWidth>600?'238.54px':'0'
            document.getElementsByClassName('side_bar')[0].style.position='static'
            document.getElementsByClassName('side_bar')[0].style.overflow='auto'
            document.getElementsByClassName('info')[0].style.overflow='auto'
        })

        document.querySelectorAll('.top_bar button')[0].addEventListener('click',()=>
        {
            document.getElementsByClassName('side_bar')[0].style.width='238.54px'
            document.getElementsByClassName('side_bar')[0].style.position='fixed'
            document.getElementsByClassName('side_bar')[0].style.overflow='hidden'
            document.getElementsByClassName('info')[0].style.overflow='hidden'
        })
        
        document.addEventListener('click',(e)=>
        {
            if(e.target!==document.getElementById('menu') && e.target!==document.getElementById('menu_icon') && window.innerWidth<601)
            {
                document.getElementsByClassName('side_bar')[0].style.position='static'
                document.getElementsByClassName('side_bar')[0].style.width='0'
                document.getElementsByClassName('side_bar')[0].style.overflow='auto'
                document.getElementsByClassName('info')[0].style.overflow='auto'
        
            }
        })

        document.querySelectorAll('.feedback button')[0].addEventListener('click',()=>
        {
            if(name.value.length>0 && name.value.length<16 && email.value.length>0 && email.value.length<31 && feedback_message.value.length>0 && feedback_message.value.length<201)
            {
                if(email.value.includes('@') && email.value.includes('.') && email.value.split('@')[0].length>0 && email.value.split('.')[0].length>0 && email.value.split('.')[1].length>0 && email.value.split('@')[1].length>0 )
                {
                    fetch('/feedback',{
                        method:'POST',
                        headers:{'Content-Type':'application/json'},
                        body:JSON.stringify({
                            name:name.value,
                            email:email.value,
                            feedback_message:feedback_message.value
                        })
                    })
                    .then(responce=>responce.json())
                    .then(data=>
                    {
                        if(data.success)
                        {
                            name.value=''
                            email.value=''
                            feedback_message.value=''
                            alert('Feedback Sent Successfully')
                        }
                        else{
                            alert('Slow Internet Connection')
                        }
                    })
                }
                else{
                    alert('Correct Email Format: you@domain.tld')
                }
            }
            else{
                alert('Length Ranges:\nName: 1-15\nEmail: 1-30\nFeedback: 1-200')
            }
        })
    </script>
</body>
</html>